---
layout: post
title: "Ubuntu 20.04 Server Nvidia A6000 GPU Driver install"
categories: [1. Computer Engineering]
tags: [1.4. OS, 1.4.1. Linux]
---

|OS|OS_version|GPU|Drvier|
|--|----------|---|------|
|Ubuntu Server|20.04|RTX A6000|515.48.07|

### Ubuntu Server install to Server

[Ubuntu Server](https://mirror.kakao.com/ubuntu-releases/20.04/)

Ubuntu Server iso file download to Kakao-mirror Server.

### Flash iso file on Usb

[Rufus Software](https://rufus.ie/en/)

Flash ubuntu-server iso file to USB using Rufus software.

### Install Ubuntu-Server OS on Server-Computer

1. GNU GRUB
    * Install Ubuntu Server
2. Select Language
    * English(US)
3. Select Keyboard configuration
    * English(US)
4. Network connections
    * Edit IPv4
    * IPv4 Method:
        * Manual
        * Subnet : *.*.*.0/24
        * Address : *.*.*.*
        * Gateway : *.*.*.1
        * Name servers : *.*.*.*, *.*.*.*
        * search domains : empty
        * save
5. Proxy address
    * Pass(Done)
6. Mirror address
    * Pass(Done)
7. Select Disk and Disk Size
    * Use an entire disk
        * Done
    * USED DEVICES
        * ubuntu-lv ... size -> Entire size
        * Done
8. Profile setup
9. Install OpenSSH server
    * Check
    * Done
10. Featured Server Snaps
    * Pass(Done)

### DeActivate Nouveau

[Ubuntu 20.04 LTS에서 Nouveau 비활성화 및 CUDA 설치하기](https://lee-jaewon.github.io/ubuntu/CUDA/)

```ubuntu-server
sudo vim /etc/modprobe.d/blacklist.conf
```

```blacklist.conf
...

blacklist nouveau
options nouveau modeset=0
```

```ubuntu-server
sudo update-initramfs -u

sudo reboot

lsmod |grep nouveau
```

### Install Nvidia-A6000 Driver

[서버에 NVIDIA 드라이버 설치하기 - Ubuntu 16.04 LTS Server(Titan XP)](https://devyurim.github.io/development%20environment/ubuntu/2018/05/24/ubuntu-2.html)

```ubuntu-server
sudo apt-get update
sudo apt-get upgrade

cat /proc/driver/nvidia/version

apt-get update && apt-get install -y dialog language-pack-en

export LANGUAGE=en_US
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

sudo update-locale

sudo vi /etc/default/locale
```

```locale
LANG="en_US.UTF-8"
LANGUAGE="en_US:en"
LC_ALL="en_US.UTF-8"
```

```ubuntu-server
# Check Nvidia A6000 Drvier for Server

apt-cache search nvidia

sudo apt-get install nvidia-driver-515-server

sudo reboot

nvidia-smi

+-----------------------------------------------------------------------------+
| NVIDIA-SMI 515.48.07    Driver Version: 515.48.07    CUDA Version: 11.7     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA RTX A6000    Off  | 00000000:41:00.0 Off |                  Off |
| 30%   57C    P0    86W / 300W |      0MiB / 49140MiB |      5%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+

# Install nvidia-container-toolkit

distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \
   && curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add - \
   && curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list

sudo apt-get update && sudo apt-get install -y nvidia-container-toolkit

sudo systemctl restart docker
```